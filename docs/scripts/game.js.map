{"version":3,"sources":["webpack:///webpack/bootstrap fd91c3c179ff1a18f451","webpack:///./scripts/index.js","webpack:///./scripts/states/index.js","webpack:///./scripts/states/Gameplay.js","webpack:///./scripts/states/_State.js","webpack:///./scripts/game_objects/index.js","webpack:///./scripts/game_objects/Player.js","webpack:///./scripts/game_objects/Enemies.js","webpack:///./scripts/game_objects/Alien.js","webpack:///./scripts/game_objects/SolarMeter.js","webpack:///./scripts/display_objects/index.js","webpack:///./scripts/display_objects/BitmapFont.js","webpack:///./scripts/game_objects/Spell.js","webpack:///./scripts/game_objects/Spells.js","webpack:///./scripts/game_objects/BrickSprite.js","webpack:///./scripts/game_objects/Room.js","webpack:///./scripts/game_objects/Book.js","webpack:///./scripts/game_objects/Grass.js","webpack:///./scripts/game_objects/Explosion.js","webpack:///./scripts/game_objects/Explosions.js","webpack:///./scripts/sounds/index.js","webpack:///./scripts/filters/Sunset.js","webpack:///./scripts/states/Gameover.js","webpack:///./scripts/states/Loading.js","webpack:///./scripts/states/Menu.js","webpack:///./scripts/states/Story.js"],"names":["width","height","renderer","Phaser","AUTO","parent","defaultState","transparent","antialias","physicsConfig","game","Game","loading","state","global","module","exports","stateManager","changeState","menu","gameplay","gameover","story","createState","checkState","name","add","start","Gameplay","startAt","Date","now","background","grass","world","sunsetFilter","filter","setBounds","player","centerX","solarMeter","enemies","explosions","spells","book","room","setTarget","setSpawnPoints","x","y","centerY","scores","enemiesKilled","timeElapsed","waves","existing","bringToTop","startMoveTimer","startSpawnTimer","draining","spacebar","input","keyboard","addKey","Keyboard","SPACEBAR","filters","onStartDraining","close","onStartCharging","open","onEnterTargetZone","health","onDown","spawnSpellAt","facing","spell","sound","update","physics","arcade","collide","overlap","onSpellEnemyCollide","bind","isDown","LEFT","moveLeft","RIGHT","moveRight","UP","moveUp","DOWN","moveDown","charging","itteration","stateProvider","scoring","alpha","kills","time","wave","enemy","spawnExplosionAt","kill","_State","State","PLAYER","ENEMIES","SOLAR_METER","ALIEN","BRICK","ROOM","BOOK","SPELL","SPELLS","GRASS","EXPLOSION","EXPLOSIONS","load","loader","spritesheet","group","setAlienBuilder","alien","setSpellBuilder","setExplosionBuilder","explosion","brick","brickSprite","MOVE_DURATION","Player","key","enable","body","drag","onCollide","Signal","collideWorldBounds","animations","velocity","currentAnim","restart","stop","animation","play","move","Sprite","MOVE_DELAY","SPAWN_DELAY","Enemies","builder","alienBuilder","spawnPoints","target","timer","create","loop","children","forEach","determineMovement","spawnAlien","i","spawnPoint","rnd","pick","spawnAlienAt","countLiving","getFirstDead","revive","Group","Alien","attackTimer","dispatch","startAttacking","stopAttacking","running","randNum","integerInRange","xDiff","yDiff","Math","abs","moveToBook","travel","dirNum","MAX_HEALTH","MIN_HEALTH","CHARGE_DELAY","DRAIN_DELAY","STATE_DRAINING","STATE_CHARGING","SolarMeter","drainTimer","drain","chargeTimer","charge","hud","bodyFont","mkhealth","killCounter","mkkills","timeCounter","mktime","waveCounter","mkwave","text","num","ms","dt","hours","String","getHours","minutes","getMinutes","seconds","getSeconds","length","join","DISPLAY_FONT","BODY_FONT","bitmapFont","displayFont","align","BitmapFont","size","value","__align","anchor","BitmapText","Spell","angle","setSize","setTimeout","Spells","spellBuilder","spawn","cast","Bricksprite","immovable","Room","Book","Grass","Explosion","Explosions","explosionBuilder","explode","audio","Filter","Sunset","call","uniforms","type","fragmentSrc","prototype","Object","constructor","defineProperty","get","set","Gameover","stage","disableVisibilityChange","titleText","actionText","events","visible","ENTER","Loading","scale","scaleMode","ScaleManager","SHOW_ALL","pageAlignHorizontally","pageAlignVertically","renderSession","roundPixels","Canvas","setImageRenderingCrisp","canvas","addKeyCapture","Menu","alphabetText","maxWidth","Story","instructionText"],"mappings":"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","file":"scripts/game.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap fd91c3c179ff1a18f451\n **/","import States from './states';\n\n// 2x Gameboy resolution\nconst width = 320;\nconst height = 288;\nconst renderer = Phaser.AUTO;\nconst parent = 'content';\nconst defaultState = null;\nconst transparent = false;\nconst antialias = false;\nconst physicsConfig = null;\nconst game = new Phaser.Game(\n  width,\n  height,\n  renderer,\n  parent,\n  defaultState,\n  transparent,\n  antialias,\n  physicsConfig\n);\n\nStates.loading(game.state);\n\nglobal.game = game;\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/index.js\n **/","import Gameplay from './Gameplay';\nimport Gameover from './Gameover';\nimport Loading from './Loading';\nimport Menu from './Menu';\nimport Story from './Story';\n\nmodule.exports = {\n  loading: function loading (stateManager) {\n    changeState(stateManager, Loading);\n  },\n\n  menu: function menu (stateManager) {\n    changeState(stateManager, Menu);\n  },\n\n  gameplay: function gameplay (stateManager) {\n    changeState(stateManager, Gameplay);\n  },\n\n  gameover: function gameover (stateManager) {\n    changeState(stateManager, Gameover);\n  },\n\n  story: function story (stateManager) {\n    changeState(stateManager, Story);\n  }\n};\n\n/**\n * This weird little work-around is here because I wasn't able to import\n * index.js into files in the same directory. Injecting the module via\n * each state's constructor felt OKAY, but I'd love to understand more.\n */\nfunction createState (state) {\n  return new state(module.exports);\n}\n\nfunction changeState (stateManager, state) {\n  if (stateManager.checkState(state.name) != true) {\n    stateManager.add(state.name, createState(state));\n  }\n  stateManager.start(state.name);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/index.js\n **/","import _State from './_State';\nimport GameObjects from '../game_objects';\nimport DisplayObjects from '../display_objects';\nimport Sounds from '../sounds';\nimport '../filters/Sunset';\n\nexport default class Gameplay extends _State {\n  create () {\n    this.startAt = Date.now();\n    this.background = GameObjects.grass(this.game, 0, 0, this.world.width, this.world.height);\n    this.sunsetFilter = game.add.filter('Sunset');\n    this.world.setBounds(0, 0, this.world.width, this.world.height);\n    this.player = GameObjects.player(game, this.world.centerX, 60);\n    this.solarMeter = GameObjects.solarMeter(game);\n    this.enemies = GameObjects.enemies(game);\n    this.explosions = GameObjects.explosions(game);\n    this.spells = GameObjects.spells(game);\n    this.book = GameObjects.book(game, 152, 124);\n    this.room = GameObjects.room(game, 120, 104);\n    this.enemies.setTarget(this.book);\n    this.enemies.setSpawnPoints([\n      //{ x: 50, y: 50}, {x: 200, y: 50}\n      { x: -16, y: -16 },\n      { x: -16, y: this.world.centerY },\n      { x: -16, y: this.world.height + 16 },\n      { x: this.world.width + 16, y: -16 },\n      { x: this.world.width + 16, y: this.world.centerY },\n      { x: this.world.width + 16, y: this.world.height + 16 },\n      { x: -16, y: -16 },\n      { x: this.world.centerX, y: -16 },\n      { x: this.world.width + 16, y: -16 },\n      { x: -16, y: this.world.height + 16 },\n      { x: this.world.centerX, y: this.world.height + 16 },\n      { x: this.world.width + 16, y: this.world.height + 16 }\n    ]);\n\n    this.game.scores = {\n      enemiesKilled: 0,\n      timeElapsed: 0,\n      waves: 0\n    };\n\n    this.add.existing(this.background);\n    this.add.existing(this.room);\n    this.add.existing(this.book);\n    this.add.existing(this.enemies);\n    this.add.existing(this.explosions);\n    this.add.existing(this.player);\n    this.add.existing(this.solarMeter);\n    this.add.existing(this.spells);\n\n    this.game.world.bringToTop(this.enemies);\n    this.game.world.bringToTop(this.explosions);\n    this.game.world.bringToTop(this.spells);\n    this.game.world.bringToTop(this.solarMeter);\n\n    this.enemies.startMoveTimer();\n    this.enemies.startSpawnTimer();\n    this.solarMeter.draining();\n\n    this.spacebar = this.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);\n\n    game.world.filters = [this.sunsetFilter];\n\n    this.solarMeter.onStartDraining.add(() => {\n      this.book.close();\n    }, this);\n\n    this.solarMeter.onStartCharging.add(() => {\n      this.book.open();\n    }, this);\n\n    this.enemies.onEnterTargetZone.add(() => {\n      this.solarMeter.health--;\n    }, this);\n\n    this.spacebar.onDown.add(() => {\n      this.spells.spawnSpellAt(this.player.x + 8, this.player.y + 8, this.player.facing);\n      Sounds.spell(this.game.sound);\n    }, this);\n  }\n\n  update () {\n    this.sunsetFilter.update();\n    this.game.physics.arcade.collide(this.player, this.enemies);\n    this.game.physics.arcade.collide(this.player, this.book);\n    this.game.physics.arcade.collide(this.enemies, this.enemies);\n    this.game.physics.arcade.overlap(this.spells, this.enemies, this.onSpellEnemyCollide.bind(this))\n\n    if (this.input.keyboard.isDown(Phaser.Keyboard.LEFT)) {\n      this.player.moveLeft();\n    }\n\n    if (this.input.keyboard.isDown(Phaser.Keyboard.RIGHT)) {\n      this.player.moveRight();\n    }\n\n    if (this.input.keyboard.isDown(Phaser.Keyboard.UP)) {\n      this.player.moveUp();\n    }\n\n    if (this.input.keyboard.isDown(Phaser.Keyboard.DOWN)) {\n      this.player.moveDown();\n    }\n\n    if (this.player.overlap(this.room)) {\n      this.solarMeter.charging();\n    } else {\n      this.solarMeter.draining();\n    }\n\n    if (this.solarMeter.health <= 0) {\n      this.game.scores.timeElapsed = Date.now() - this.startAt;\n      this.game.scores.waves = this.enemies.itteration - 1;\n      this.stateProvider.gameover(this.state, this.scoring);\n    }\n\n    this.sunsetFilter.alpha = 1 - this.solarMeter.health / 100;\n    this.solarMeter.kills = this.game.scores.enemiesKilled;\n    this.solarMeter.time = Date.now() - this.startAt;\n    this.solarMeter.wave = this.enemies.itteration - 1;\n  }\n\n  onSpellEnemyCollide (spell, enemy) {\n    this.game.scores.enemiesKilled++;\n    this.explosions.spawnExplosionAt(enemy.x, enemy.y);\n    enemy.kill();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/Gameplay.js\n **/","export default class _State extends Phaser.State {\n  constructor (stateProvider) {\n    super();\n    this.stateProvider = stateProvider;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/_State.js\n **/","import Player from './Player';\nimport Enemies from './Enemies';\nimport Alien from './Alien';\nimport SolarMeter from './SolarMeter';\nimport Spell from './Spell';\nimport Spells from './Spells';\nimport BrickSprite from './BrickSprite'; //importing the bricksprite class\nimport Room from './Room';\nimport Book from './Book';\nimport Grass from './Grass';\nimport Explosion from './Explosion';\nimport Explosions from './Explosions';\n\nconst PLAYER = 'player';\nconst ENEMIES = 'enemies';\nconst SOLAR_METER = 'solar_meter';\nconst ALIEN = 'alien';\nconst BRICK = 'brick';\nconst ROOM = 'room';\nconst BOOK = 'book';\nconst SPELL = 'spell';\nconst SPELLS = 'spells';\nconst GRASS = 'grass';\nconst EXPLOSION = 'explosion';\nconst EXPLOSIONS = 'explosions';\n\nmodule.exports = {\n  load: function load (loader) {\n    loader.load.spritesheet(PLAYER, 'player.png', 16, 16);\n    loader.load.spritesheet(ALIEN, 'bat.png', 16, 16);\n    loader.load.spritesheet(BRICK, 'brick.png', 16, 16);\n    loader.load.spritesheet(BOOK, 'book.png', 16, 16);\n    loader.load.spritesheet(ROOM, 'room.png', 80, 80);\n    loader.load.spritesheet(SPELL, 'spell.png', 16, 48);\n    loader.load.spritesheet(GRASS, 'grass.png', 320, 288);\n    loader.load.spritesheet(EXPLOSION, 'explosion.png',16, 16);\n  },\n\n  enemies: function enemies (game, parent) {\n    const group = new Enemies(game, parent, ENEMIES);\n    group.setAlienBuilder(module.exports.alien)\n    return group;\n  },\n\n  spells: function enemies (game, parent) {\n    const group = new Spells(game, parent, SPELLS);\n    group.setSpellBuilder(module.exports.spell);\n    return group;\n  },\n\n  explosions: function explosions (game, parent) {\n    const group = new Explosions(game, parent, EXPLOSIONS);\n    group.setExplosionBuilder(module.exports.explosion);\n    return group;\n  },\n\n  solarMeter: function solarMeter (game, parent) {\n    return new SolarMeter(game, parent, SOLAR_METER)\n  },\n\n  player: function player (game, x, y) {\n    return new Player(game, x, y, PLAYER);\n  },\n\n  room: function room(game, x, y){\n    return new Room(game, x, y, ROOM);\n  },\n\n  alien: function alien (game, x, y) {\n    return new Alien(game, x, y, ALIEN);\n  },\n\n  brick: function brickSprite (game, x, y) {\n    return new BrickSprite(game, x, y, BRICK);\n  },\n\n  book: function book (game, x, y) {\n    return new Book(game, x, y, BOOK);\n  },\n\n  spell: function spell (game, x, y) {\n    return new Spell(game, x, y, SPELL);\n  },\n\n  grass: function grass (game, x, y) {\n    return new Grass(game, x, y, GRASS);\n  },\n\n  explosion: function explosion (game, x, y) {\n    return new Explosion(game, x, y, EXPLOSION);\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/index.js\n **/","const MOVE_DURATION = 100;\nconst UP = 'up';\nconst DOWN = 'down';\nconst LEFT = 'left';\nconst RIGHT = 'right';\n\nexport default class Player extends Phaser.Sprite {\n  constructor (game, x, y, key) {\n    super(game, x, y, key);\n\n    game.physics.enable(this);\n\n    this.facing = LEFT;\n\n    this.body.drag.x = 1000;\n    this.body.drag.y = 1000;\n\n    this.body.onCollide = new Phaser.Signal();\n    this.body.collideWorldBounds = true;\n\n    this.animations.add('walkDown', [0, 1, 0, 2], 6, true);\n    this.animations.add('walkUp', [3, 4, 3, 5], 6, true);\n    this.animations.add('walkRight', [6, 7, 6, 8], 6, true);\n    this.animations.add('walkLeft', [9, 10, 9, 11], 6, true);\n  }\n\n  update () {\n    if (this.body.velocity.x == 0 && this.body.velocity.y == 0) {\n      this.animations.currentAnim.restart();\n      this.animations.stop();\n    }\n  }\n\n  move (x, y, facing, animation) {\n    if (animation) {\n      this.animations.play(animation);\n    }\n\n    this.facing = facing;\n\n    switch (this.facing) {\n      case LEFT:\n        this.body.velocity.x = -160\n        break;\n      case RIGHT:\n        this.body.velocity.x = 160\n        break;\n      case UP:\n        this.body.velocity.y = -160\n        break;\n      case DOWN:\n        this.body.velocity.y = 160\n        break;\n    }\n  }\n\n  moveLeft () {\n    this.move(-16, 0, LEFT, 'walkLeft');\n  }\n\n  moveRight () {\n    this.move(16, 0, RIGHT, 'walkRight');\n  }\n\n  moveUp () {\n    this.move(0, -16, UP, 'walkUp');\n  }\n\n  moveDown () {\n    this.move(0, 16, DOWN, 'walkDown');\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Player.js\n **/","const MOVE_DELAY = 500;\nconst SPAWN_DELAY = 4000;\n\nexport default class Enemies extends Phaser.Group {\n  constructor (game, parent, name) {\n    super(game, parent, name);\n    this.onEnterTargetZone = new Phaser.Signal();\n    this.itteration = 1;\n  }\n\n  setAlienBuilder (builder) {\n    this.alienBuilder = builder;\n  }\n\n  setSpawnPoints (spawnPoints) {\n    this.spawnPoints = spawnPoints;\n  }\n\n  setTarget (target) {\n    this.target = target;\n  }\n\n  startMoveTimer () {\n    const timer = this.game.time.create();\n\n    timer.loop(MOVE_DELAY, () => {\n      this.children.forEach((enemy) => enemy.determineMovement());\n    }, this);\n    timer.start();\n  }\n\n  startSpawnTimer () {\n    const timer = this.game.time.create();\n\n    this.spawnAlien();\n    timer.loop(SPAWN_DELAY, () => this.spawnAlien(), this);\n    timer.start();\n  }\n\n  spawnAlien () {\n    for(var i = 0; i < this.itteration; i++){\n      const spawnPoint = this.game.rnd.pick(this.spawnPoints);\n      this.spawnAlienAt(spawnPoint.x, spawnPoint.y);\n    }\n\n    this.itteration++;\n  }\n\n  spawnAlienAt (x, y) {\n    if (this.countLiving() > 500) {\n      return;\n    }\n\n    const alien = this.getFirstDead() || this.alienBuilder(game);\n\n    alien.x = x;\n    alien.y = y;\n    alien.target = this.target;\n    alien.onEnterTargetZone = this.onEnterTargetZone;\n    alien.revive()\n    this.add(alien)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Enemies.js\n **/","const MOVE_DURATION = 100;\nconst UP = 'up';\nconst DOWN = 'down';\nconst LEFT = 'left';\nconst RIGHT = 'right';\n\nexport default class Alien extends Phaser.Sprite {\n  constructor (game, x, y, key) {\n    super(game, x, y, key);\n\n    game.physics.enable(this);\n\n    this.body.drag.x = 1000;\n    this.body.drag.y = 1000;\n\n    this.body.onCollide = new Phaser.Signal();\n\n    this.animations.add('walkDown', [4, 5, 6, 7], 6, true);\n    this.animations.add('walkUp', [0, 1, 2, 3], 6, true);\n    this.animations.add('walkRight', [4, 5, 6, 7], 6, true);\n    this.animations.add('walkLeft', [4, 5, 6, 7], 6, true);\n    this.animations.add('vampire', [8, 9, 10, 11], 6, true);\n\n    this.target = null;\n    this.onEnterTargetZone = null;\n    this.attackTimer = this.game.time.create();\n    this.attackTimer.loop(100, () => {\n      this.onEnterTargetZone && this.onEnterTargetZone.dispatch();\n    }, this);\n  }\n\n  update () {\n    if (this.target && this.overlap(this.target)) {\n      this.body.velocity.x = 0;\n      this.body.velocity.y = 0;\n      this.startAttacking();\n    } else {\n      this.stopAttacking();\n    }\n  }\n\n  startAttacking () {\n    if (!this.attackTimer.running) {\n      this.attackTimer.start();\n    }\n  }\n\n  stopAttacking () {\n    if (this.attackTimer.running) {\n      this.attackTimer.stop(false);\n    }\n  }\n\n  kill () {\n    this.stopAttacking();\n    super.kill()\n  }\n\n  determineMovement () {\n    const randNum = this.game.rnd.integerInRange(1, 100);\n    const xDiff = 160 - this.x;\n    const yDiff = 144 - this.y;\n\n    //If the enemy isn't next to the book then procede with movement\n    if (Math.abs(xDiff) > 32 ||  Math.abs(yDiff) > 32){\n      if(randNum > 30){\n        this.moveToBook(xDiff, yDiff);\n      }\n      else{\n        this.travel();\n      }\n    } else {\n      this.animations.play('vampire');\n    }\n  }\n\n  //Move the enemy in a random direction.\n  travel () {\n    const dirNum = this.game.rnd.integerInRange(1, 4);\n\n    switch (dirNum) {\n      case 1: this.moveLeft();\n        break;\n      case 2: this.moveRight();\n        break;\n      case 3: this.moveUp();\n        break;\n      case 4: this.moveDown();\n        break;\n    }\n  }\n\n  //Move the enemy towards the book.\n  moveToBook(xDiff, yDiff){\n    if(xDiff > 0) {\n      this.moveRight();\n    }\n    else {\n      this.moveLeft();\n    }\n\n    if(yDiff > 0){\n      this.moveDown();\n    }\n    else{\n      this.moveUp();\n    }\n  }\n\n  move (x, y, facing, animation) {\n    if (animation) {\n      this.animations.play(animation);\n    }\n\n    this.facing = facing;\n\n    switch (this.facing) {\n      case LEFT:\n        this.body.velocity.x = -360\n        break;\n      case RIGHT:\n        this.body.velocity.x = 360\n        break;\n      case UP:\n        this.body.velocity.y = -360\n        break;\n      case DOWN:\n        this.body.velocity.y = 360\n        break;\n    }\n  }\n\n  moveLeft () {\n    this.move(-16, 0, LEFT, 'walkLeft');\n  }\n\n  moveRight () {\n    this.move(16, 0, RIGHT, 'walkRight');\n  }\n\n  moveUp () {\n    this.move(0, -16, UP, 'walkUp');\n  }\n\n  moveDown () {\n    this.move(0, 16, DOWN, 'walkDown');\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Alien.js\n **/","import DisplayObjects from '../display_objects';\n\nconst MAX_HEALTH = 100;\nconst MIN_HEALTH = 0;\nconst CHARGE_DELAY = 200;\nconst DRAIN_DELAY = 500;\nconst STATE_DRAINING = 'draining';\nconst STATE_CHARGING = 'charging';\n\nexport default class SolarMeter extends Phaser.Group {\n  constructor (game, parent, name) {\n    super(game, parent, name);\n    this.health = MAX_HEALTH;\n    this.kills = 0;\n    this.time = 0;\n    this.wave = 0;\n\n    this.drainTimer = this.game.time.create();\n    this.drainTimer.loop(DRAIN_DELAY, () => this.drain(), this);\n\n    this.chargeTimer = this.game.time.create();\n    this.chargeTimer.loop(CHARGE_DELAY, () => this.charge(), this);\n\n    this.hud = DisplayObjects.bodyFont(this.game, this.mkhealth(this.health), 16, 16);\n    this.killCounter = DisplayObjects.bodyFont(this.game, this.mkkills(this.kills), 160, 16, 'center');\n    this.timeCounter = DisplayObjects.bodyFont(this.game, this.mktime(this.time), 304, 16, 'right');\n    this.waveCounter = DisplayObjects.bodyFont(this.game, this.mkwave(this.wave), 160, 272, 'center');\n\n    this.onStartDraining = new Phaser.Signal();\n    this.onStartCharging = new Phaser.Signal();\n\n    this.add(this.hud);\n    this.add(this.killCounter);\n    this.add(this.timeCounter);\n    this.add(this.waveCounter);\n  }\n\n  draining () {\n    if (this.state !== STATE_DRAINING) {\n      this.chargeTimer.stop(false);\n      this.drainTimer.start();\n      this.state = STATE_DRAINING;\n      this.onStartDraining.dispatch();\n    }\n  }\n\n  charging () {\n    if (this.state !== STATE_CHARGING) {\n      this.drainTimer.stop(false);\n      this.chargeTimer.start();\n      this.state = STATE_CHARGING;\n      this.onStartCharging.dispatch();\n    }\n  }\n\n  drain () {\n    if (this.health > MIN_HEALTH) {\n      this.health--;\n    }\n  }\n\n  charge () {\n    if (this.health < MAX_HEALTH) {\n      this.health++;\n    }\n  }\n\n  update () {\n    this.hud.text = this.mkhealth(this.health);\n    this.killCounter.text = this.mkkills(this.kills);\n    this.timeCounter.text = this.mktime(this.time);\n    this.waveCounter.text = this.mkwave(this.wave);\n  }\n\n  mkhealth (num) {\n    return num + ' sols';\n  }\n\n  mkkills (num) {\n    return num + ' kills';\n  }\n\n  mktime (ms) {\n    let dt = new Date(ms);\n    let hours = String(16 - dt.getHours());\n    let minutes = String(dt.getMinutes());\n    let seconds = String(dt.getSeconds());\n\n    if (hours.length < 2) hours = '0' + hours;\n    if (minutes.length < 2) minutes = '0' + minutes;\n    if (seconds.length < 2) seconds = '0' + seconds;\n\n    return [hours, minutes, seconds].join(':')\n  }\n\n  mkwave (num) {\n    return 'wave ' + num;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/SolarMeter.js\n **/","import BitmapFont from './BitmapFont';\n\nconst DISPLAY_FONT = 'Blocktopia_32pt';\nconst BODY_FONT = 'Blocktopia_12pt';\n\nmodule.exports = {\n  load: function load (loader) {\n    loader.load.bitmapFont(DISPLAY_FONT, 'Blocktopia_32pt.png', 'Blocktopia_32pt.fnt');\n    loader.load.bitmapFont(BODY_FONT, 'Blocktopia_12pt.png', 'Blocktopia_12pt.fnt');\n  },\n\n  displayFont: function displayFont (game, text = '', x = 0, y = 0, align = 'left') {\n    return new BitmapFont(game, x, y, DISPLAY_FONT, text, 30, align);\n  },\n\n  bodyFont: function displayFont (game, text = '', x = 0, y = 0, align = 'left') {\n    return new BitmapFont(game, x, y, BODY_FONT, text, 12, align);\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/display_objects/index.js\n **/","export default class BitmapFont extends Phaser.BitmapText {\n  constructor (game, x, y, key, text, size, align) {\n    super(game, x, y, key, text, size, align);\n  }\n\n  /**\n   * @override Phaser.BitmapText._align\n   */\n  set _align (value) {\n    this.__align = value;\n    switch (value) {\n    case 'center':\n      this.anchor.x = 0.5;\n      this.anchor.y = 0.5;\n      break;\n    case 'right':\n      this.anchor.x = 1;\n      this.anchor.y = 0.5;\n      break;\n    case 'left':\n    default:\n      this.anchor.x = 0;\n      this.anchor.y = 0.5;\n      break;\n    }\n  }\n\n  get _align () {\n    return this.__align;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/display_objects/BitmapFont.js\n **/","const UP = 'up';\nconst DOWN = 'down';\nconst LEFT = 'left';\nconst RIGHT = 'right';\n\nexport default class Spell extends Phaser.Sprite {\n  constructor (game, x, y, name){\n    super(game, x, y, name);\n\n    game.physics.enable(this);\n\n    this.anchor.x = .5;\n    this.anchor.y = .5;\n    this.animations.add('cast', [1, 2, 3], 12, false);\n  }\n\n  cast (facing) {\n    this.animations.play('cast');\n\n    switch (facing) {\n      case LEFT:\n        this.angle = 180;\n        this.body.setSize(4, 29, 2, 10)\n        this.body.velocity.x = -200;\n        this.body.velocity.y = 0;\n        break;\n      case RIGHT:\n        this.angle = 0;\n        this.body.setSize(4, 29, 9, 8)\n        this.body.velocity.x = 200;\n        this.body.velocity.y = 0;\n        break;\n      case UP:\n        this.angle = 270;\n        this.body.setSize(29, 4, -8, 18)\n        this.body.velocity.x = 0;\n        this.body.velocity.y = -200;\n        break;\n      case DOWN:\n        this.angle = 90;\n        this.body.setSize(29, 4, -6, 25)\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 200;\n        break;\n    }\n\n    setTimeout(this.kill.bind(this), 250);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Spell.js\n **/","export default class Spells extends Phaser.Group {\n  constructor (game, parent, name) {\n    super(game, parent, name);\n  }\n\n  setSpellBuilder (builder) {\n    this.spellBuilder = builder;\n  }\n\n  spawnSpellAt (x, y, facing) {\n    if (this.countLiving() > 500) {\n      return;\n    }\n\n    const spawn = this.getFirstDead() || this.spellBuilder(game);\n\n    spawn.x = x;\n    spawn.y = y;\n    spawn.revive();\n    spawn.cast(facing);\n    this.add(spawn)\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Spells.js\n **/","export default class Bricksprite extends Phaser.Sprite{\n  constructor(game, x, y, key){\n    super(game, x, y, key);\n    game.physics.enable(this);\n    this.body.immovable = true;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/BrickSprite.js\n **/","export default class Room extends Phaser.Sprite {\n  constructor (game, x, y, name){\n    super(game, x, y, name);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Room.js\n **/","export default class Book extends Phaser.Sprite{\n  constructor(game, x, y, key){\n    super(game, x, y, key);\n    game.physics.enable(this);\n    this.body.immovable = true;\n    this.body.height = 2;\n    this.animations.add('open', [0, 1, 2, 3], 12, false);\n    this.animations.add('close', [4, 5, 6, 7], 12, false);\n  }\n\n  open () {\n    this.animations.play('open');\n  }\n\n  close () {\n    this.animations.play('close');\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Book.js\n **/","export default class Grass extends Phaser.Sprite{\n  constructor(game, x, y, key){\n    super(game, x, y, key);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Grass.js\n **/","export default class Explosion extends Phaser.Sprite{\n  constructor(game, x, y, key){\n    super(game, x, y, key);\n    this.animations.add('explode', [0, 1, 2], 12, false);\n  }\n\n  explode () {\n    this.animations.play('explode', null, false, true);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Explosion.js\n **/","export default class Explosions extends Phaser.Group {\n  constructor (game, parent, name) {\n    super(game, parent, name);\n  }\n\n  setExplosionBuilder (builder) {\n    this.explosionBuilder = builder;\n  }\n\n  spawnExplosionAt (x, y) {\n    const spawn = this.getFirstDead() || this.explosionBuilder(game);\n\n    spawn.x = x;\n    spawn.y = y;\n    spawn.revive();\n    this.add(spawn);\n    spawn.explode();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/game_objects/Explosions.js\n **/","const SPELL = 'spell';\n\nmodule.exports = {\n  load: function load (loader) {\n    loader.load.audio(SPELL, 'spell.wav', true);\n  },\n\n  spell: function spell (player) {\n    player.play(SPELL);\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/sounds/index.js\n **/","Phaser.Filter.Sunset = function (game) {\n\n    Phaser.Filter.call(this, game);\n\n    this.uniforms.alpha = { type: '1f', value: 0.5 };\n\n    this.fragmentSrc = [\n\n        \"precision mediump float;\",\n\n        \"varying vec2       vTextureCoord;\",\n        \"varying vec4       vColor;\",\n        \"uniform sampler2D  uSampler;\",\n        \"uniform float      alpha;\",\n\n        \"void main(void) {\",\n            \"gl_FragColor = texture2D(uSampler, vTextureCoord);\",\n            \"float r = 0.5126 * gl_FragColor.r;\",\n            \"float g = 0.2152 * gl_FragColor.g;\",\n            \"float b = 0.7722 * gl_FragColor.b;\",\n            \"vec3 color = vec3(r, g, b);\",\n            \"gl_FragColor.rgb = mix(gl_FragColor.rgb, color, alpha);\",\n        \"}\"\n    ];\n\n};\n\nPhaser.Filter.Sunset.prototype = Object.create(Phaser.Filter.prototype);\nPhaser.Filter.Sunset.prototype.constructor = Phaser.Filter.Sunset;\n\n/**\n* The strength of the alpha. 1 will make the object black and white, 0 will make the object its normal color\n* @property alpha\n*/\nObject.defineProperty(Phaser.Filter.Sunset.prototype, 'alpha', {\n\n    get: function() {\n        return this.uniforms.alpha.value;\n    },\n\n    set: function(value) {\n        this.uniforms.alpha.value = value;\n    }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/filters/Sunset.js\n **/","import _State from './_State';\nimport DisplayObjects from '../display_objects';\nimport GameObjects from '../game_objects';\nimport '../filters/Sunset';\n\nexport default class Gameover extends _State {\n  create () {\n    this.background = GameObjects.grass(this.game, 0, 0, this.world.width, this.world.height);\n    this.sunsetFilter = game.add.filter('Sunset');\n    this.room = GameObjects.room(game, 120, 104);\n    this.book = GameObjects.book(game, 152, 124);\n    this.solarMeter = GameObjects.solarMeter(game);\n\n    this.world.setBounds(0, 0, this.world.width, this.world.height);\n\n    this.stage.disableVisibilityChange = true;\n\n    this.add.existing(this.background);\n    this.add.existing(this.room);\n    this.add.existing(this.book);\n    this.add.existing(this.titleText());\n    this.add.existing(this.actionText());\n    this.add.existing(this.solarMeter);\n\n    this.game.world.bringToTop(this.solarMeter);\n\n    game.world.filters = [this.sunsetFilter];\n    this.sunsetFilter.alpha = 1;\n    this.sunsetFilter.update();\n\n    this.solarMeter.health = 0;\n    this.solarMeter.kills = this.game.scores.enemiesKilled;\n    this.solarMeter.time = this.game.scores.timeElapsed;\n    this.solarMeter.wave = this.game.scores.waves;\n    this.solarMeter.update();\n  }\n\n  titleText () {\n    return DisplayObjects.displayFont(game, 'Game Over', this.world.centerX, 80, 'center');\n  }\n\n  actionText () {\n    var text = DisplayObjects.bodyFont(game, 'Press ENTER to Play!', this.world.centerX, 200, 'center');\n    this.time.events.loop(400, () => text.visible = !text.visible);\n    return text;\n  }\n\n  update () {\n    if (this.input.keyboard.isDown(Phaser.Keyboard.ENTER)) {\n      this.stateProvider.gameplay(this.state);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/Gameover.js\n **/","import _State from './_State';\nimport DisplayObjects from '../display_objects';\nimport GameObjects from '../game_objects';\nimport Sounds from '../sounds';\n\nexport default class Loading extends _State {\n  init () {\n    // Pixel-perfect canvas scaling!\n    // Thanks to http://www.belenalbeza.com/retro-crisp-pixel-art-in-phaser/\n    game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n    game.scale.pageAlignHorizontally = true;\n    game.scale.pageAlignVertically = true;\n\n    // Rounds x/y positions to the nearest whole to avoid sub-pixel rendering\n    game.renderer.renderSession.roundPixels = true;\n\n    // Sets browser-prefixed \"image-rendering\" CSS property on the game canvas\n    Phaser.Canvas.setImageRenderingCrisp(game.canvas);\n\n    // Prevent these keys from being handled by the browser\n    // when the game is in focus\n    game.input.keyboard.addKeyCapture(Phaser.Keyboard.SPACEBAR);\n  }\n\n  preload () {\n    DisplayObjects.load(this);\n    GameObjects.load(this);\n    Sounds.load(this);\n  }\n\n  // create() is automagically triggerd after preload completes\n  create () {\n    this.stateProvider.menu(this.state);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/Loading.js\n **/","import _State from './_State';\nimport DisplayObjects from '../display_objects';\nimport GameObjects from '../game_objects';\n\nexport default class Menu extends _State {\n  create () {\n    this.background = GameObjects.grass(this.game, 0, 0, this.world.width, this.world.height);\n    this.room = GameObjects.room(game, 120, 104);\n    this.book = GameObjects.book(game, 152, 124);\n\n    this.world.setBounds(0, 0, this.world.width, this.world.height);\n\n    this.stage.disableVisibilityChange = true;\n\n    this.add.existing(this.background);\n    this.add.existing(this.room);\n    this.add.existing(this.book);\n    this.add.existing(this.titleText());\n    this.add.existing(this.alphabetText());\n    this.add.existing(this.actionText());\n  }\n\n  titleText () {\n    var text = DisplayObjects.displayFont(game, `\nTHE HOUSE OF THE RISING SUN\n    `, this.world.centerX, 70, 'center');\n    text.maxWidth = 300;\n    return text;\n  }\n\n  alphabetText () {\n    var text = DisplayObjects.bodyFont(game, ``, this.world.centerX, 145, 'center');\n    text.maxWidth = 300;\n    return text;\n  }\n\n  actionText () {\n    var text = DisplayObjects.bodyFont(game, `\nPress ENTER to Play!\n    `, this.world.centerX, 200, 'center');\n    this.time.events.loop(400, () => text.visible = !text.visible);\n    return text;\n  }\n\n  update () {\n    if (this.input.keyboard.isDown(Phaser.Keyboard.ENTER)) {\n      this.stateProvider.story(this.state);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/Menu.js\n **/","import _State from './_State';\nimport DisplayObjects from '../display_objects';\nimport GameObjects from '../game_objects';\n\nexport default class Story extends _State {\n  create () {\n    this.background = GameObjects.grass(this.game, 0, 0, this.world.width, this.world.height);\n    this.room = GameObjects.room(game, 120, 104);\n    this.book = GameObjects.book(game, 152, 124);\n\n    this.world.setBounds(0, 0, this.world.width, this.world.height);\n\n    this.stage.disableVisibilityChange = true;\n\n    this.add.existing(this.background);\n    this.add.existing(this.room);\n    this.add.existing(this.book);\n    this.add.existing(this.alphabetText());\n    this.add.existing(this.instructionText());\n    this.add.existing(this.actionText());\n  }\n\n  alphabetText () {\n    var text = DisplayObjects.bodyFont(game, `\nYou are a wizard who must fight against the coming night by reading from your Tome of the Sun. But a horde of vampires wants nothing more than to send the world into perpetual darkness.\n\nKeep the sun high by defending your reading room against the vampires. Don't let the sun set!\n    `, this.world.centerX, 54, 'center');\n    text.maxWidth = 300;\n    return text;\n  }\n\n  instructionText () {\n    var text = DisplayObjects.bodyFont(game, `\nUse the ARROW KEYS to move\nand press SPACEBAR to attack. Good luck!\n    `, this.world.centerX, 212, 'center');\n    text.maxWidth = 300;\n    return text;\n  }\n\n  actionText () {\n    var text = DisplayObjects.bodyFont(game, `\nPress ENTER to Play!\n    `, this.world.centerX, 254, 'center');\n    this.time.events.loop(400, () => text.visible = !text.visible);\n    return text;\n  }\n\n  update () {\n    if (this.input.keyboard.isDown(Phaser.Keyboard.ENTER)) {\n      this.stateProvider.gameplay(this.state);\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/states/Story.js\n **/"],"sourceRoot":""}